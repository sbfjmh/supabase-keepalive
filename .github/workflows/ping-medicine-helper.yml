name: Ping Supabase (medicine-helper)
on:
  # 定时触发（和原有脚本保持一致或自定义频率）
  schedule:
    - cron: '0 0 */1 * *' # 每天0点激活（可改：比如 */2 每2天）
  # 手动触发（方便测试）
  workflow_dispatch:

jobs:
  ping-medicine-helper:
    runs-on: ubuntu-latest
    steps:
      - name: 拉取代码
        uses: actions/checkout@v4
      
      - name: 执行激活脚本
        env:
          # 仅配置 medicine-helper 的环境变量
          SUPABASE_URL_MEDICINE: ${{ secrets.SUPABASE_URL_MEDICINE }}
          SUPABASE_ANON_KEY_MEDICINE: ${{ secrets.SUPABASE_ANON_KEY_MEDICINE }}
        run: node scripts/ping-medicine-helper.js
